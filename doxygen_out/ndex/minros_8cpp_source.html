<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MinROS: src/MinROS/minros.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MinROS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0dd5b28e58c5cbd0aa72bbbc10f5cd30.html">MinROS</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">minros.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="minros_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// © Copyright 2020, Septentrio NV/SA.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// All rights reserved.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// modification, are permitted provided that the following conditions are met:</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//    1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//    2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//       notice, this list of conditions and the following disclaimer in the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//       documentation and/or other materials provided with the distribution.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//    3. Neither the name of the copyright holder nor the names of its</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//       contributors may be used to endorse or promote products derived</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//       from this software without specific prior written permission.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE </span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR </span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF </span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS </span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN </span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) </span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// POSSIBILITY OF SUCH DAMAGE. </span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="minros_8hpp.html">include/MinROS/minros.hpp</a>&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;ros/ros.h&gt;</span> <span class="comment">// Every ROS file needs this header, otherwise, e.g. &quot;ros::Publisher&quot; would yield grumble (error: &quot;Publisher&quot; is not a member of &quot;ros&quot;)</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="mosaic_message_8hpp.html#a40085c817fd45fa92733fe56c856dbee">Comm_IO::read</a>(T&amp; message, std::string message_ID, <span class="keyword">typename</span> <a class="code" href="class_callback_handler__.html#a472e461d93e795039db2f52ea147dd13">CallbackHandler_&lt;T&gt;::Callback</a> new_callback, <span class="keyword">const</span> boost::posix_time::time_duration&amp; timeout) </div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span> (!manager_) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">return</span> callbacks_.read(message, message_ID, new_callback, timeout);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classio__comm__mosaic_1_1_comm___i_o.html#a164d746cda240748dfd2c6d8fb3c040c">   44</a></span>&#160;<span class="keywordtype">bool</span> Comm_IO::InitializeSerial(std::string port, uint32_t baudrate,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            std::string flowcontrol) </div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    serial_port_ = port;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    baudrate_ = baudrate;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    boost::shared_ptr&lt;boost::asio::io_service&gt; io_service(</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keyword">new</span> boost::asio::io_service); </div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment">// The io_context, of which io_service is a typedef of,</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="comment">// represents your program&#39;s link to the operating system&#39;s I/O services.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    boost::shared_ptr&lt;boost::asio::serial_port&gt; serial(</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">new</span> boost::asio::serial_port(*io_service));</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="comment">// To perform I/O operations the program needs an I/O object, here &quot;serial&quot;.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// We attempt the opening of the serial port..</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        serial-&gt;open(serial_port_);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    } </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">catch</span> (std::runtime_error&amp; e) </div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// and return an error message in case it fails.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;mosaic-X5: Could not open serial port :&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                 + serial_port_ + <span class="stringliteral">&quot; &quot;</span> + e.what());</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    ROS_INFO(<span class="stringliteral">&quot;mosaic-X5: Opened serial port %s&quot;</span>, serial_port_.str());</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    </div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span>(BOOST_VERSION &lt; 106600)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">// Workaround to set some options for the port manually, </span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">// cf. https://github.com/mavlink/mavros/pull/971/files</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">// This function native_handle() may be used to obtain </span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">// the underlying representation of the serial port.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">// Conversion from type native_handle_type to int is done implicitly.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordtype">int</span> fd = serial-&gt;native_handle();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        termios tio;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">// Get terminal attribute, follows the syntax</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">// int tcgetattr(int fd, struct termios *termios_p);</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        tcgetattr(fd, &amp;tio); </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Setting hardware flow control settings..</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (flowcontrol == <span class="stringliteral">&quot;RTS|CTS&quot;</span>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            tio.c_iflag &amp;= ~(IXOFF | IXON);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            tio.c_cflag |= CRTSCTS;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            tio.c_iflag &amp;= ~(IXOFF | IXON);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            tio.c_cflag &amp;= ~CRTSCTS;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">// Setting serial port to &quot;raw&quot; mode to prevent EOF exit..</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        cfmakeraw(&amp;tio);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        </div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// Commit settings, syntax is </span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">// int tcsetattr(int fd, int optional_actions,</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">//      const struct termios *termios_p);</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        tcsetattr(fd, TCSANOW, &amp;tio);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Set the I/O manager</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (manager_) </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        ROS_ERROR(<span class="stringliteral">&quot;You have called InitializeSerial twice! Start anew..&quot;</span>)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    setManager(boost::shared_ptr&lt;Manager&gt;(</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">new</span> <a class="code" href="class_async_manager.html">AsyncManager&lt;boost::asio::serial_port&gt;</a>(serial, io_service)));</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// configured_ = false;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Setting the baudrate, incrementally..</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    boost::asio::serial_port_base::baud_rate current_baudrate;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    serial-&gt;get_option(current_baudrate);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Gradually increase the baudrate to the desired value</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// The desired baudrate can be lower or larger than the</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// current baudrate; the for loop takes care of both scenarios.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <span class="keyword">sizeof</span>(<a class="code" href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">Baudrates</a>)/<span class="keyword">sizeof</span>(<a class="code" href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">Baudrates</a>[0]); i++) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">if</span> (current_baudrate.value() == baudrate_)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">// Break if the desired baudrate is has been reached or is lower</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">if</span>(current_baudrate.value() &gt; <a class="code" href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">Baudrates</a>[i] &amp;&amp; baudrate_ &gt; <a class="code" href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">Baudrates</a>[i])</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">continue</span>; </div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="comment">// Initially, increment until Baudrate[i] matches current_baudrate</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        serial-&gt;set_option(</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            boost::asio::serial_port_base::baud_rate(<a class="code" href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">Baudrates</a>[i]));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        boost::this_thread::sleep(</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            boost::posix_time::milliseconds(SetBaudrateSleepMs));</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        serial-&gt;get_option(current_baudrate);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        ROS_DEBUG(<span class="stringliteral">&quot;mosaic-X5: Set ASIO baudrate to %u&quot;</span>, current_baudrate.value());</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classio__comm__mosaic_1_1_comm___i_o.html#a686bf92a19e383b21a912fb8ddf40ccd">  135</a></span>&#160;<span class="keywordtype">void</span> Comm_IO::setManager(<span class="keyword">const</span> boost::shared_ptr&lt;Manager&gt;&amp; manager) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (manager) <span class="keywordflow">return</span>; <span class="comment">//Empty argument is not enough</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    manager_ = manager;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    manager_-&gt;setCallback(boost::bind(&amp;<a class="code" href="class_callback_handlers.html#afe39d98c70e7f1a7bb2aa23ae4242970">CallbackHandlers::readCallback</a>,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                    &amp;callbacks_, _1, _2));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// configured_ = static_cast&lt;bool&gt;(manager); //How can this make sense? Perhaps if something is missing, configured_ is false</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classio__comm__mosaic_1_1_comm___i_o.html#ad5c53c6d9d54b7aa69e837f5c813b48e">  144</a></span>&#160;<span class="keywordtype">void</span> Comm_IO::resetSerial(std::string port) </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    boost::shared_ptr&lt;boost::asio::io_service&gt; io_service(<span class="keyword">new</span> boost::asio::io_service);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    boost::shared_ptr&lt;boost::asio::serial_port&gt; serial(<span class="keyword">new</span> boost::asio::serial_port(*io_service));</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Try to open serial port</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">try</span> </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        serial-&gt;open(port);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    } <span class="keywordflow">catch</span> (std::runtime_error&amp; e) </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;mosaic: Could not open serial port :&quot;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                             + port + <span class="stringliteral">&quot; &quot;</span> + e.what());</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ROS_INFO(<span class="stringliteral">&quot;mosaic: Reset serial port %s&quot;</span>, port.str());</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Sets the I/O worker</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (worker_) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    setWorker(boost::shared_ptr&lt;Worker&gt;(<span class="keyword">new</span> AsyncWorker&lt;boost::asio::serial_port&gt;(serial, io_service)));</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    // Polls ReceiverStatus block</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    std::vector&lt;uint8_t&gt; receiverstatus;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    if (!poll(..., receiverstatus)) </span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">        ROS_ERROR(&quot;Resetting Serial Port: Could not poll ReceiverStatus&quot;);</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">        return;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">    ReceiverStatus struct_object;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">    if(!read(struct_object, ...default_timeout_)) </span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">    {</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">        ROS_ERROR(&quot;Resetting Serial Port: Could not read polled ReceiverStatus&quot;);</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">        return;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Set the baudrate</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    serial-&gt;set_option(boost::asio::serial_port_base::baud_rate(baudrate_));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="minros_8cpp.html#aed32af93941ad34f29ea221bf1f61c8a">  185</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="minros_8cpp.html#aed32af93941ad34f29ea221bf1f61c8a">defaultGetTimeHandler</a>() {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  boost::posix_time::ptime present_time(boost::posix_time::microsec_clock::universal_time());</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  boost::posix_time::time_duration duration(present_time.time_of_day());</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">return</span> duration.total_seconds();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">void defaultReceiverTimeCallback(ReceiverTime&amp; data, double&amp; cpu_stamp) {</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;defaultReceiverTimeCallback: Received ReceiverTime&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="minros_8cpp.html#a727ff25fc793d6ff0dd95cf97f42e63d">  197</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="minros_8cpp.html#a727ff25fc793d6ff0dd95cf97f42e63d">defaultPvtCartesianCallback</a>(<a class="code" href="struct_pvt_cartesian.html">PvtCartesian</a>&amp; data, <span class="keywordtype">double</span>&amp; cpu_stamp) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;defaultPvtCartesianCallback: Received PvtCartesian&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="minros_8cpp.html#a4635ef2f76b916bbc0274fdf167db65f">  202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="minros_8cpp.html#a4635ef2f76b916bbc0274fdf167db65f">defaultPosCovCartesianCallback</a>(<a class="code" href="struct_pos_cov_cartesian.html">PosCovCartesian</a>&amp; data, <span class="keywordtype">double</span>&amp; cpu_stamp) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;defaultPosCovCartesianCallback: Received PosCovCartesian&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">void defaultVelCovCartesianCallback(VelCovCartesian&amp; data, double&amp; cpu_stamp) {</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;defaultVelCovCaresianCallback: Received VelCovCartesian&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">void defaultAttitudeEulerCallback(AttitudeEuler&amp; data, double&amp; cpu_stamp) {</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;defaultAttitudeEulerCallback: Received AttitudeEuler&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">void defaultAttitudeCovEulerCallback(AttitudeCovEuler&amp; data, double&amp; cpu_stamp) {</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;defaultAttitudeCovEulerCallback: Received AttitudeCovEuler&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="class_septentrio.html#a08f539ae7d7015320cb098bb6726daf0">  226</a></span>&#160;<a class="code" href="class_septentrio.html#a08f539ae7d7015320cb098bb6726daf0">Septentrio::Septentrio</a>()  <span class="comment">// Fortunately, C++ provides a way to separate the “declaration” portion of the class from the “implementation” portion. This is done by defining the class member functions outside of the class definition. To do so, simply define the member functions of the class as if they were normal functions, but prefix the class name to the function using the scope resolution operator (::) (same as for a namespace).</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                          <span class="comment">// Now any other header or code file that wants to use the Date class can simply #include &quot;Date.h&quot;. Note that Date.cpp also needs to be compiled into any project that uses Date.h so the linker knows how Date is implemented.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">/* initialize serial reader values */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// good_antenna_locations = true;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a> = 0;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> = 0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// is_connected = false;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="class_septentrio.html#a32726c90c33c912627a1d85e72aeaa45">time_handler</a> =                    <a class="code" href="minros_8cpp.html#aed32af93941ad34f29ea221bf1f61c8a">defaultGetTimeHandler</a>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">  receiver_time_callback =          defaultReceiverTimeCallback;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">  */</span>  </div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="class_septentrio.html#a27e34669e35c70997c840171480d0a14">pvt_cartesian_callback</a> =          <a class="code" href="minros_8cpp.html#a727ff25fc793d6ff0dd95cf97f42e63d">defaultPvtCartesianCallback</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="class_septentrio.html#a8007c09f83f18bd1b66dd60a22367cf9">pos_cov_cartesian_callback</a> =      <a class="code" href="minros_8cpp.html#a4635ef2f76b916bbc0274fdf167db65f">defaultPosCovCartesianCallback</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">  vel_cov_cartesian_callback =      defaultVelCovCartesianCallback;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">  attitude_euler_callback =         defaultAttitudeEulerCallback;</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">  attitude_cov_euler_callback =     defaultAttitudeCovEulerCallback;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">  output_rate = &quot;1&quot;;</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">  range_output_rate = &quot;1&quot;;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">  manual_position = false;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">  x1 = 0.0;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">  y1 = 0.0;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">  z1 = 0.0;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">  x2 = 0.0;</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">  y2 = 0.0;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">  z2 = 0.0;</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">  </span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="comment">//Specifically for Sarnoff</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">//spits out NMEA messages over COM3 (5 pin output)</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// string NMEACOM3 = &quot;0&quot;;//for false - default is not to do it</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// string RTK_com=&quot;COM2&quot;;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// string RTK_baud=&quot;115200&quot;;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// string RTK_correction_type=&quot;CMR&quot;;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// bool rtk_input;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// if(m_MissionReader.GetConfigurationParam(&quot;NMEA_COM3&quot;,NMEACOM3)) //Be sure to set in mission file</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// {</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">//   if(NMEACOM3 == &quot;1&quot;)</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">//     RequestNMEACOM3();</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// } else {</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">//   MOOSTrace(&quot;NMEA_COM3 not set in mission file - Warning Septentrio Default set to False\n&quot;);</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// } </span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// if(m_MissionReader.GetConfigurationParam(&quot;USE_RTK&quot;,rtk_input)) //Be sure to set in mission file</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// {</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// } else {</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">//   MOOSTrace(&quot;USE_RTK not set in mission file - Warning Septentrio Default to false\n&quot;);</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">//   rtk_input = false;</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// }</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// if (rtk_input)</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// {</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">//   if(m_MissionReader.GetConfigurationParam(&quot;RTK_COM&quot;,RTK_com))</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">//   {</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">//   }else{</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">//     MOOSTrace(&quot;RTK_COM not set in mission file - Warning Septentrio Default COM2 set\n&quot;);</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">//   }</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">//   if(m_MissionReader.GetConfigurationParam(&quot;RTK_BAUD&quot;,RTK_baud))</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">//   {</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">//   }else{</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">//     MOOSTrace(&quot;RTK_BAUD not set in mission file - Warning Septentrio Default 115200 set\n&quot;);</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">//   }</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">//   if(m_MissionReader.GetConfigurationParam(&quot;RTK_CORRECTION_TYPE&quot;,RTK_correction_type))</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">//   {</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">//   }else{</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">//     MOOSTrace(&quot;RTK_CORRECTION_TYPE not set in mission file - Warning Septentrio Default CMR set\n&quot;);</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">//   }</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">//   SetRTK(RTK_com,RTK_baud,RTK_correction_type);</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// }</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="class_septentrio.html#a39388cb16e4cf0371fdc78760a135fa2">  304</a></span>&#160;<a class="code" href="class_septentrio.html#a39388cb16e4cf0371fdc78760a135fa2">Septentrio::~Septentrio</a>()</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">//disconnect();</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// Destructor is another special member function that is called by the compiler when the scope of the object ends.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">bool Septentrio::connect(std::string port, int baudrate, std::string septentrio_port_)</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">  septentrio_port = septentrio_port_;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">  // serial::Timeout my_timeout(100, 1000, 0, 1000, 0);</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">  // serial::Timeout my_timeout = serial::Timeout::simpleTimeout(1);</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">  serial::Timeout my_timeout(0, 2, 0, 2, 0);</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">  try {</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">    serial_port = new serial::Serial(port, baudrate, my_timeout);</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">    if (!serial_port-&gt;isOpen()) {  // To access members of a structure through a pointer, use the arrow operator.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">      // std::stringstream output;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">      // output &lt;&lt; &quot;Serial port: &quot; &lt;&lt; port &lt;&lt; &quot; failed to open.&quot;;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">      // log_error_(output.str());</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">      delete serial_port;</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">      serial_port = NULL;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">      is_connected = false;</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">      return false;</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    } else {</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">      // std::stringstream output;</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">      // output &lt;&lt; &quot;Serial port: &quot; &lt;&lt; port &lt;&lt; &quot; opened successfully.&quot;;</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">      // log_info_(output.str());</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">    serial_port-&gt;flush();</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">    // !!!!!!!!!!!!!</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">    // Assume that connection is successful</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">    // !!!!!!!!!!!!!</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">    //</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">    // look for GPS by sending ping and waiting for response</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">    // if (!Ping()) {</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">    //   std::stringstream output;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    //   output &lt;&lt; &quot;Septentrio GPS not found on port: &quot; &lt;&lt; port &lt;&lt; std::endl;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">    //   log_error_(output.str());</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">    //   delete serial_port;</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">    //   serial_port = NULL;</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">    //   is_connected_ = false;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">    //   return false;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">    // } </span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">  } catch (std::exception e) {</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">    // std::stringstream output;</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">    // output &lt;&lt; &quot;Failed to open port &quot; &lt;&lt; port &lt;&lt; &quot;  Err: &quot; &lt;&lt; e.what();</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">    // log_error_(output.str());</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">    serial_port = NULL;</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">    is_connected = false;</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">    return false;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">  // start reading</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">  startReading();</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">  is_connected = true;</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">  clearLog(); // turn off all output</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">  setOutputRate(output_rate);</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">  setRangeOutputRate(range_output_rate);</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">  // set manual position</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">  std::string galcmd;  </span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">  if (manual_position) {</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">    std::cout &lt;&lt; &quot;manual position true\t&quot; &lt;&lt; x2 &lt;&lt; std::endl;</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">    galcmd = &quot;gal\r\n&quot;;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">    serial_port-&gt;write(galcmd)==galcmd.length();</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">    setAntennaLocations(1, x1, y1, z1);</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">    setAntennaLocations(2, x2, y2, z2);</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">  return true;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">void Septentrio::disconnect()</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  try {</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">    if (reading_status) {</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">      stopReading();</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">      // TODO: wait here for reading to stop</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">    if (serial_port != NULL) {</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">      if (serial_port-&gt;isOpen())</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">        serial_port-&gt;close();</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">      delete serial_port;</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">      serial_port = NULL;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">  } catch (std::exception &amp;e) {</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">    // stringstream output;</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">    // output &lt;&lt; &quot;Error disconnecting from ublox: &quot; &lt;&lt; e.what();</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">    // log_error_(output.str());</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">    // std::cout &lt;&lt; &quot;Error in Disconnect()&quot;;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">void Septentrio::startReading() {</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">  try {</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">    // create thread to read from sensor</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">    reading_status = true;</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">    read_thread_ptr = boost::shared_ptr&lt;boost::thread&gt;(</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">        new boost::thread(boost::bind(&amp;Septentrio::readSerialPort, this)));</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">  } catch (std::exception &amp;e) {</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">    // std::stringstream output;</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">    // output &lt;&lt; &quot;Error starting ublox read thread: &quot; &lt;&lt; e.what();</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">    // log_error_(output.str());</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">void Septentrio::stopReading() {</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">    reading_status = false;</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">void Septentrio::readSerialPort() {</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">    uint8_t buffer[MAX_NOUT_SIZE];  // a list of objects of type uint8_t</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">    size_t len;</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    // continuously read data from serial port</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">    while (reading_status) {</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">      // read data</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">      try {</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">          len = serial_port-&gt;read(buffer, MAX_NOUT_SIZE);</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">      } catch (std::exception &amp;e) {</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">          // stringstream output;</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">          // output &lt;&lt; &quot;Error reading serial port: &quot; &lt;&lt; e.what();</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">          // log_info_(output.str());</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">          disconnect();</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">          return;</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">      }</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">      // timestamp the read</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">      read_timestamp = time_handler();</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">      // add data to the buffer to be parsed</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">      bufferIncomingData(buffer, len);</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">// Septentrio specific stuff for logs</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">bool Septentrio::clearLog()</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">  log_codes.clear();</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  std::string cmd=&quot;SetSBFOutput &quot; + septentrio_port + &quot;, off &quot; + &quot;\r\n&quot;;</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">  return (serial_port-&gt;write(cmd)==cmd.length());</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">bool Septentrio::requestLog(std::string logcode_)</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  log_codes.push_back(logcode_);</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  std::string cmd = boost::algorithm::join(log_codes, &quot;+&quot;);</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">  cmd = &quot;SetSBFOutput &quot; + septentrio_port + &quot;, &quot; + cmd + &quot; \r\n&quot;;</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;Septentrio::requestLog sending request for: &quot; &lt;&lt; cmd &lt;&lt; std::endl;</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">  return (serial_port-&gt;write(cmd)==cmd.length());</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">bool Septentrio::setOutputRate(std::string r)</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">  output_rate = r;</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  std::string cmd = &quot;SetPVTInterval &quot; + output_rate + &quot;\r\n&quot;;</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">  //TODO: read block rate from mission file</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">  return (serial_port-&gt;write(cmd)==cmd.length());</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">};</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">bool Septentrio::setRangeOutputRate(std::string r)</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">  range_output_rate = r;</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">  std::string cmd = &quot;SetMeasInterval &quot; + range_output_rate + &quot;\r\n&quot;;</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">  //TODO: read block rate from mission file</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">  return (serial_port-&gt;write(cmd)==cmd.length());</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">};</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="class_septentrio.html#a532d0aa2bb84aa32c5f1645fe606af56">  492</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_septentrio.html#a532d0aa2bb84aa32c5f1645fe606af56">Septentrio::bufferIncomingData</a>(uint8_t *msg, <span class="keywordtype">size_t</span> length)</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// std::cout&lt;&lt;&quot;Buffering\n&quot;;</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// std::cout&lt;&lt;&quot;Size of msg: &quot; &lt;&lt; length &lt;&lt; std::endl;</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// add incoming data to buffer</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;length; i++) </div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    { </div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// i will become very large!</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// cout &lt;&lt; i &lt;&lt; &quot;: &quot; &lt;&lt; hex &lt;&lt; (int)msg[i] &lt;&lt; dec  &lt;&lt; &quot; : &quot; &lt;&lt; bytesRemaining  &lt;&lt; &quot; : &quot; &lt;&lt; bufIndex &lt;&lt; endl;</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">// make sure bufIndex is not larger than buffer</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> &gt;= <a class="code" href="minros_8hpp.html#a17e333794ae761cd55ec6fd6fc0f1bac">MAX_MSG_SIZE</a>) </div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> = 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Septentrio: Overflowed receive buffer. Reset..&quot;</span> &lt;&lt; std::endl; <span class="comment">// In fact, &#39;\n&#39; is preferred over &#39;endl&#39; for new line in c++ because &#39;endl&#39; inserts new line and flushes the stream: Flushing a stream ensures that all data that has been written to that stream is output, including clearing any that may have been buffered.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">// looking for beginning of message</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> == 0) </div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        { </div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">if</span> (msg[i] == <a class="code" href="mosaic_message_8hpp.html#a8bb07e43349565d9fa5b7515c99d1043">SEP_SYNC_BYTE_1</a>) </div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            { </div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="comment">// recallint number[] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }; cout &lt;&lt; &quot;\n number    :  &quot; &lt;&lt; Number; will yield the address, same as &amp;number[0], but number[0] gives value</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                <span class="comment">// above comparison works since internally, hexadecimal number is also stored as binary data..</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="comment">// beginning of msg found - add to buffer</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="comment">// std::cout &lt;&lt; &quot;Beginning of message found\n&quot;;</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++] = msg[i]; <span class="comment">// post increment operator: first assign, then increment</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a> = 0;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>==1)     </div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        { </div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="comment">// verify 2nd character of header</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordflow">if</span> (msg[i] == <a class="code" href="mosaic_message_8hpp.html#a777fef7dfb89a56f0a5e114ce595ae7f">SEP_SYNC_BYTE_2</a>) </div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            { </div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="comment">// 2nd byte ok - add to buffer</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++]=msg[i];</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <span class="comment">// std::cout&lt;&lt;&quot;Binary Message\n&quot;;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            } </div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg[i] == <a class="code" href="mosaic_message_8hpp.html#a10fbc0ee8997d5bbede0ba57e28f72c3">SEP_SYNC_BYTE_3</a> or msg[i] == <a class="code" href="mosaic_message_8hpp.html#a78e1463e6cae838e6f2f54e6104ae0ff">SEP_SYNC_BYTE_4</a>) </div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++] = msg[i];</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="comment">// std::cout&lt;&lt;&quot;ASCII Message\n&quot;;</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            } </div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">else</span> </div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="comment">// start looking for new message again</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="comment">// std::cout &lt;&lt; &quot;start looking for new message again&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>=0;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a>=0;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a>=<span class="keyword">false</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        } </div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> == 7) </div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        { </div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="comment">// reading last byte of header</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="comment">// std::cout&lt;&lt;&quot;(bufIndex==7)\n&quot;;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++]=msg[i]; </div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="comment">//we should have the entire header now</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a>) </div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                memcpy(&amp;<a class="code" href="class_septentrio.html#a62181db6b6f012c95883d21903d837e1">latest_header</a>, <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>, 8);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a> = <a class="code" href="class_septentrio.html#a62181db6b6f012c95883d21903d837e1">latest_header</a>.<a class="code" href="struct_block_header__t.html#a822dac6159cb707be904fef859af3e7c">Length</a> - 8;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        } </div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a>==1) </div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        { </div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="comment">// add last byte of !message! and parse</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="comment">// std::cout&lt;&lt;&quot;(bytesRemaining==1)\n&quot;;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++]=msg[i];</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          </div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">// CRC Check</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordtype">bool</span> CRCcheck = <a class="code" href="crc_8c.html#a0e5fbe587f4f4f83b262a280c3271822">CRCIsValid</a>(<a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="keywordflow">if</span> (CRCcheck == <span class="keyword">true</span>)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;CRC Check returned True. Continue with parsing.. \n&quot;</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;CRC Check returned False. Not a valid data block, perhaps noisy. Move on to next message/block of data stream..\n&quot;</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="comment">// bufIndex = 0;</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <span class="comment">// bytesRemaining = 0;</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="comment">// readingNMEAASCII = false; // does not make any difference whether included or not</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        </div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <a class="code" href="class_septentrio.html#a6e3530157d234a5fda580e3218d8d3c3">ParseBinary</a>(<a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>,<a class="code" href="class_septentrio.html#a62181db6b6f012c95883d21903d837e1">latest_header</a>.<a class="code" href="struct_block_header__t.html#ae47cfac225de0794d56e9d0e8b55318b">ID</a>); <span class="comment">// you dont just parse header!!</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="comment">// reset counters</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>=0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a>=0;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="comment">// std::cout &lt;&lt; &quot;Message Done.&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        } </div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a>&gt;1)||((<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>&gt;1)&amp;&amp;(<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>&lt;7))) </div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        { </div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="comment">// add data to buffer, this part is very important, either there are many many bytes from message to add to databuf, or from header</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++] = msg[i];</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a>) </div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <a class="code" href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">bytesRemaining</a>--; <span class="comment">// recall: post and predecrement don&#39;t differ in this case</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        } </div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a>) &amp;&amp; (<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a> &gt; 7) ) </div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="comment">// std::cout&lt;&lt;&quot;reading ascii message\n&quot;;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="comment">// std::cout&lt;&lt;hex&lt;&lt;(int)msg[i]&lt;&lt; std::endl;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (!(msg[i]==0x0A))</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <span class="comment">//looking for end of line character, line feed (after carriage return, NMEA message always ends with line feed)</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++]=msg[i];</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            } </div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">else</span> </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>[<a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>++]=msg[i]; <span class="comment">// this is = 0, if you search for 0x24 instead</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                <a class="code" href="class_septentrio.html#a044e74573ef755a30cf8a2b216b82a00">ParseNMEAASCII</a>(<a class="code" href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">dataBuf</a>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                <a class="code" href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">readingNMEAASCII</a>=<span class="keyword">false</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <a class="code" href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">bufIndex</a>=0;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="class_septentrio.html#a044e74573ef755a30cf8a2b216b82a00">  615</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_septentrio.html#a044e74573ef755a30cf8a2b216b82a00">Septentrio::ParseNMEAASCII</a>(uint8_t* block)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{ </div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// std::stringstream ss (std::stringstream::in | std::stringstream::out); // | is Bitwise inclusive OR, i.e. not XOR, not sure why RHS (right of ss) is needed</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// e.g. int countWords(string str) </span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// {     // breaking input into word using string stream </span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// std::stringstream s(str); // Used for breaking words </span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// string word; // to store individual words </span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  </div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// int count = 0; </span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">// while (s &gt;&gt; word) </span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">//  count++; </span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// return count; }</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// std::string block2;</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// E.g. PolaRx: string block=&quot;$PolaRx: SetAntennaLocation auto, 2, 5.23, 10.00, -2.000\n $PolaRx: SetAntennaLocation manual, 2, 0.47355, 10.51, -2.143\n&quot;;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;ASCII BLOCK:\n&quot;</span> &lt;&lt; block &lt;&lt; std::endl;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// ss &lt;&lt; block; // Storing the whole string into string stream ss</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// getline(ss,block2); // i think block 2 then does not contain anything other than 1 line, hence seems faulty...</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// part of the &lt;string&gt; header. The getline() function extracts characters from the input stream and appends it to the string object until the delimiting character is encountered. While doing so the previously stored value in the string object str will be replaced by the input string if any.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// delimitation character here is by default new line(\n)character.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// std::cout &lt;&lt; block2 &lt;&lt; std::endl;</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  </div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// boost::char_separator&lt;char&gt; sep(&quot;\n&quot;);</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// The char_separator class breaks a sequence of characters into tokens based on character delimiters</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; lines(block2,sep); // lines name is fitting</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// BOOST_FOREACH(std::string line, lines) { // BOOST_FOREACH is great for iterating over sequences, here iterating over lines</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// Example Code for understanding &lt;boost/tokenizer.hpp&gt;..</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="comment">/* char_sep_example.cpp</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">        #include &lt;iostream&gt;</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">        #include &lt;boost/tokenizer.hpp&gt;</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">        #include &lt;string&gt;</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">        int main()</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">        {</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">            std::string str = &quot;;;Hello|world||-foo--bar;yow;baz|&quot;;</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">            typedef boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; </span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">            tokenizer;</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">            boost::char_separator&lt;char&gt; sep(&quot;-;|&quot;);</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">            tokenizer tokens(str, sep);</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">            for (tokenizer::iterator tok_iter = tokens.begin();</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">               tok_iter != tokens.end(); ++tok_iter)</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">            {</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">                std::cout &lt;&lt; &quot;&lt;&quot; &lt;&lt; *tok_iter &lt;&lt; &quot;&gt; &quot;;</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">                std::cout &lt;&lt; &quot;\n&quot;;</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">            }</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">            return EXIT_SUCCESS;</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">        }</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">        */</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        </div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="comment">// std::cout &lt;&lt; &quot;LINE:\n&quot;;</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    boost::char_separator&lt;char&gt; sep(<span class="stringliteral">&quot;,&quot;</span>); <span class="comment">// needed empty space &quot;, &quot; for SetAntennaLocation for PolaRx..</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keyword">typedef</span> boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; tokenizer;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    std::string block_in_string(reinterpret_cast&lt;char*&gt;(block));</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// We cannot uses overloaded &#39;=&#39; operator from string class since that converts char* to string </span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Instead, reinterpret_cast&lt;char*&gt;(name) casts from uint8_t* to char* in an unsafe way but that&#39;s the one which should be used here. Then you call the ordinary constructor of std::string</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    tokenizer tokens(block_in_string,sep);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="classminros__driver_1_1_gpgga_parser.html">minros_driver::GpggaParser</a> parser_obj;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> (*tokens.begin() == parser_obj.<a class="code" href="classminros__driver_1_1_gpgga_parser.html#ac4f9631e40074edae5f23a58b1036aea">GetMessageID</a>()) </div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        std::string <span class="keywordtype">id</span> = parser_obj.<a class="code" href="classminros__driver_1_1_gpgga_parser.html#ac4f9631e40074edae5f23a58b1036aea">GetMessageID</a>();</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        std::vector&lt;std::string&gt; body;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">for</span> (tokenizer::iterator tok_iter = tokens.begin(); tok_iter != tokens.end(); ++tok_iter) <span class="comment">// perhaps str.erase from &lt;string.h&gt; would be faster, but i would not know what exactly to do..</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="comment">// create NmeaSentence struct to pass to GpggaParser::ParseAscii</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            body.push_back(*tok_iter);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="structminros__driver_1_1_n_m_e_a_sentence.html">minros_driver::NMEASentence</a> gga_message;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        gga_message = {id, body};</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">// Pass NmeaSentence struct to GGA-Parser</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        nmea_msgs::GpggaPtr gpgga_ros_message_ptr;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">try</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            gpgga_ros_message_ptr = parser_obj.<a class="code" href="classminros__driver_1_1_gpgga_parser.html#ac7c69d4247abb7cfc766e90afc19a426">ParseASCII</a>(gga_message);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">catch</span> (<a class="code" href="classminros__driver_1_1_parse_exception.html">minros_driver::ParseException</a>&amp; e)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;GGA parsing failed: &quot;</span> &lt;&lt; e.what() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="comment">// Publish GGA ROS Message to topic /gpgga topic</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="comment">// ros::init(argc, argv, &quot;topic_publisher&quot;); // will only be in int main() part of our code...</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        ros::NodeHandle nhgga;  <span class="comment">//the elegant solution does not have any nodehandle instantiation here I guess.., same for next line perhaps</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        ros::Publisher gpgga_pub = nhgga.advertise&lt;nmea_msgs::Gpgga&gt;(<span class="stringliteral">&quot;/gpgga&quot;</span>, 1);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;Node and publisher created, now publishing data&quot;</span>);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        ros::Rate loop_rate(10);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">while</span> (ros::ok())</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            gpgga_pub.publish(*gpgga_ros_message_ptr); <span class="comment">// not sure *... works...</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            ros::spinOnce();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            loop_rate.sleep();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        }</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// std::cout &lt;&lt; &quot;\nASCII MESSAGE!!!\n&quot;;</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">//cout&lt;&lt;block;</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="class_septentrio.html#a6e3530157d234a5fda580e3218d8d3c3">  713</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_septentrio.html#a6e3530157d234a5fda580e3218d8d3c3">Septentrio::ParseBinary</a>(uint8_t* block, uint32_t ID)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;{</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// std::cout &lt;&lt; &quot;Septentrio::ParseBinary&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">switch</span>(ID) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">    // Reciever time (Current GPS and UTC time)</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">    case 5914:</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">      memcpy(&amp;latest_receivertime, block+8, sizeof(latest_receivertime)); // copy block of memory: void * memcpy(void *to, const void *from, size_t numBytes); so the function takes addresses</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">      receiver_time_callback(latest_receivertime, read_timestamp);</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">      break;</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// Postion and velocity in XYZ</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">case</span> 5903:</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="struct_pvt_cartesian.html">PvtCartesian</a> latest_pvtxyz;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      memcpy(&amp;latest_pvtxyz, block+8, <span class="keyword">sizeof</span>(latest_pvtxyz)); <span class="comment">// you cut out the block you are interested in via sizeof(..) since you do not care about the header of the block..</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="class_septentrio.html#a0f8c7040192f2b11d429c36842bcb93a">read_timestamp</a> = <a class="code" href="class_septentrio.html#a32726c90c33c912627a1d85e72aeaa45">time_handler</a>(); <span class="comment">// Caution: This should be part of Septentrio::readSerialPort(), since you want the timestamp when message came in, not after all these calculations...</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="class_septentrio.html#a27e34669e35c70997c840171480d0a14">pvt_cartesian_callback</a>(latest_pvtxyz, <a class="code" href="class_septentrio.html#a0f8c7040192f2b11d429c36842bcb93a">read_timestamp</a>); </div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="comment">// now do latest_pvtxyz.GPS_ms for instance</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// Position Covariance block</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">case</span> 5905:</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <a class="code" href="struct_pos_cov_cartesian.html">PosCovCartesian</a> latest_pvtxyz_pos_cov;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      memcpy(&amp;latest_pvtxyz_pos_cov, block+8, <span class="keyword">sizeof</span>(latest_pvtxyz_pos_cov));</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <a class="code" href="class_septentrio.html#a0f8c7040192f2b11d429c36842bcb93a">read_timestamp</a> = <a class="code" href="class_septentrio.html#a32726c90c33c912627a1d85e72aeaa45">time_handler</a>();</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <a class="code" href="class_septentrio.html#a8007c09f83f18bd1b66dd60a22367cf9">pos_cov_cartesian_callback</a>(latest_pvtxyz_pos_cov, <a class="code" href="class_septentrio.html#a0f8c7040192f2b11d429c36842bcb93a">read_timestamp</a>);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">    // Velocity Covariance block</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">    case 5907:</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">      VelCovCartesian latest_pvtxyz_vel_cov;</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">      memcpy(&amp;latest_pvtxyz_vel_cov, block+8, sizeof(latest_pvtxyz_vel_cov));</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">      vel_cov_cartesian_callback(latest_pvtxyz_vel_cov, read_timestamp);</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">      break;</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">    // Attitude expressed as Euler Angle </span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">    case 5938: </span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">      AttitudeEuler latest_atteuler;</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">      memcpy(&amp;latest_atteuler, block+8, sizeof(latest_atteuler));</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">      attitude_euler_callback(latest_atteuler, read_timestamp);</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">      break;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">    //Attitude covariance (cross terms not currently given)</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">    case 5939:</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">      AttitudeCovEuler latest_atteuler_cov;</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">      memcpy(&amp;latest_atteuler_cov, block+8, sizeof(latest_atteuler_cov));</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">      attitude_cov_euler_callback(latest_atteuler_cov, read_timestamp);</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">      break;</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">    // //Range (MeasEpoch)</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">    // case 5889:</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">    //   update_range(block, blockTime);</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">    //   break;</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">    // //Ephemeris (GPSVav)</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">    // case 5891:</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">    //   SEP_EPHEMERIS latest_ephemeris;</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">    //   memcpy(&amp;latest_ephemeris, block+8, sizeof(latest_ephemeris));</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">    //   update_ephemeris(blockTime);</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">    //   break;</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">bool Septentrio::setAntennaLocations(int ant_num, double x, double y, double z)</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">  if ((ant_num != 1) &amp;&amp; (ant_num != 2)) {</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">    // TODO:  log error here</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">    return false;</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">  x1 = x;</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">  y1 = y;</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">  z1 = z;</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">  std::stringstream cmd;</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">  cmd &lt;&lt;&quot;SetAntennaLocation manual &quot; &lt;&lt; ant_num &lt;&lt; &quot; &quot; &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; &quot; &quot; &lt;&lt; z &lt;&lt; &quot;\r\n&quot;;</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">  return (serial_port-&gt;write(cmd.str())==cmd.str().length());</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">  //TODO: check for acknowledgement from receiver??</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">  // TODO: check positions??</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">  // TODO: merge this with the stuff in ParseNMEAASCII??</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">bool Septentrio::setRTK(std::string rtk_port, int rtk_baud, std::string rtk_format)</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;\n\nSetting RTK on in teh driver\n\n\n&quot;;</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">  serial_port-&gt;write(&quot;SetPVTMode standalone+RTK \r\n&quot;);</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">  std::stringstream cmd;</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">  cmd &lt;&lt; &quot;Set&quot; &lt;&lt; rtk_format &lt;&lt; &quot;iNput &quot; &lt;&lt; rtk_port &lt;&lt; &quot; \r\n&quot;;</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">  serial_port-&gt;write(cmd.str());</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;just wrote: &quot; &lt;&lt; cmd.str();</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">  cmd.str(std::string());</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">  cmd &lt;&lt; &quot;SetComSettings &quot; &lt;&lt; rtk_port &lt;&lt; &quot; &quot; &lt;&lt; rtk_baud &lt;&lt; &quot; \r\n&quot;;</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">  serial_port-&gt;write(cmd.str()); </span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;just wrote: &quot; &lt;&lt; cmd.str();</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">  // TODO: check output in ASCII</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">  // TODO: make this a bool function</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">  // TODO: check the covariance of output solution to make sure it&#39;s as low as</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">  //       an RTK solution should be.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">  is_rtk = true;</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;\n\nSet RTK on in driver\n\n&quot;;</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">  return true;</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">bool Septentrio::setRTK()</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">{</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">  std::cout &lt;&lt; &quot;\n\nSetting RTK off in driver\n\n&quot;;</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">  serial_port-&gt;write(&quot;SetPVTMode standalone \r\n&quot;);</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">  is_rtk = false;</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">  return true;</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">// You must initialize the NodeHandle in the &quot;main&quot; function (or in any method called indirectly or directly by the main function). &quot;I&quot; sometimes declare a pointer to the NodeHandle as global variable to my program and then initialize it afterwards in the main.</span></div><div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="minros_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">  831</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="minros_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    ros::init(argc, argv, <span class="stringliteral">&quot;main&quot;</span>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="class_septentrio.html">Septentrio</a> Testing;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    ros::spin();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;};</div><div class="ttc" id="minros_8cpp_html_a727ff25fc793d6ff0dd95cf97f42e63d"><div class="ttname"><a href="minros_8cpp.html#a727ff25fc793d6ff0dd95cf97f42e63d">defaultPvtCartesianCallback</a></div><div class="ttdeci">void defaultPvtCartesianCallback(PvtCartesian &amp;data, double &amp;cpu_stamp)</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00197">minros.cpp:197</a></div></div>
<div class="ttc" id="classminros__driver_1_1_gpgga_parser_html_ac4f9631e40074edae5f23a58b1036aea"><div class="ttname"><a href="classminros__driver_1_1_gpgga_parser.html#ac4f9631e40074edae5f23a58b1036aea">minros_driver::GpggaParser::GetMessageID</a></div><div class="ttdeci">const std::string GetMessageID() const override</div><div class="ttdoc">Returns the ASCII message ID, here &quot;$GPGGA&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="gpgga_8cpp_source.html#l00043">gpgga.cpp:43</a></div></div>
<div class="ttc" id="struct_pvt_cartesian_html"><div class="ttname"><a href="struct_pvt_cartesian.html">PvtCartesian</a></div><div class="ttdoc">Struct for the SBF block &quot;PVTCartesian&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="sbf__structs_8hpp_source.html#l00125">sbf_structs.hpp:125</a></div></div>
<div class="ttc" id="mosaic_message_8hpp_html_a10fbc0ee8997d5bbede0ba57e28f72c3"><div class="ttname"><a href="mosaic_message_8hpp.html#a10fbc0ee8997d5bbede0ba57e28f72c3">SEP_SYNC_BYTE_3</a></div><div class="ttdeci">#define SEP_SYNC_BYTE_3</div><div class="ttdef"><b>Definition:</b> <a href="mosaic_message_8hpp_source.html#l00033">mosaicMessage.hpp:33</a></div></div>
<div class="ttc" id="class_septentrio_html_a044e74573ef755a30cf8a2b216b82a00"><div class="ttname"><a href="class_septentrio.html#a044e74573ef755a30cf8a2b216b82a00">Septentrio::ParseNMEAASCII</a></div><div class="ttdeci">void ParseNMEAASCII(uint8_t *block)</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00615">minros.cpp:615</a></div></div>
<div class="ttc" id="classminros__driver_1_1_parse_exception_html"><div class="ttname"><a href="classminros__driver_1_1_parse_exception.html">minros_driver::ParseException</a></div><div class="ttdoc">Ćlass to declare error message format when parsing, derived from the public class &quot;std::runtime_error...</div><div class="ttdef"><b>Definition:</b> <a href="parse__exception_8hpp_source.html#l00077">parse_exception.hpp:77</a></div></div>
<div class="ttc" id="minros_8cpp_html_aed32af93941ad34f29ea221bf1f61c8a"><div class="ttname"><a href="minros_8cpp.html#aed32af93941ad34f29ea221bf1f61c8a">defaultGetTimeHandler</a></div><div class="ttdeci">double defaultGetTimeHandler()</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00185">minros.cpp:185</a></div></div>
<div class="ttc" id="minros_8hpp_html_a17e333794ae761cd55ec6fd6fc0f1bac"><div class="ttname"><a href="minros_8hpp.html#a17e333794ae761cd55ec6fd6fc0f1bac">MAX_MSG_SIZE</a></div><div class="ttdeci">#define MAX_MSG_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00063">minros.hpp:63</a></div></div>
<div class="ttc" id="minros_8cpp_html_a4635ef2f76b916bbc0274fdf167db65f"><div class="ttname"><a href="minros_8cpp.html#a4635ef2f76b916bbc0274fdf167db65f">defaultPosCovCartesianCallback</a></div><div class="ttdeci">void defaultPosCovCartesianCallback(PosCovCartesian &amp;data, double &amp;cpu_stamp)</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00202">minros.cpp:202</a></div></div>
<div class="ttc" id="mosaic_message_8hpp_html_a78e1463e6cae838e6f2f54e6104ae0ff"><div class="ttname"><a href="mosaic_message_8hpp.html#a78e1463e6cae838e6f2f54e6104ae0ff">SEP_SYNC_BYTE_4</a></div><div class="ttdeci">#define SEP_SYNC_BYTE_4</div><div class="ttdef"><b>Definition:</b> <a href="mosaic_message_8hpp_source.html#l00034">mosaicMessage.hpp:34</a></div></div>
<div class="ttc" id="class_septentrio_html_ad31f984e085d9296ea2a17793e7ab6b9"><div class="ttname"><a href="class_septentrio.html#ad31f984e085d9296ea2a17793e7ab6b9">Septentrio::bytesRemaining</a></div><div class="ttdeci">unsigned int bytesRemaining</div><div class="ttdoc">Number of bytes to be read in current message. </div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00460">minros.hpp:460</a></div></div>
<div class="ttc" id="class_septentrio_html_a0f8c7040192f2b11d429c36842bcb93a"><div class="ttname"><a href="class_septentrio.html#a0f8c7040192f2b11d429c36842bcb93a">Septentrio::read_timestamp</a></div><div class="ttdeci">double read_timestamp</div><div class="ttdoc">Serial port object for communicating with sensor. </div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00451">minros.hpp:451</a></div></div>
<div class="ttc" id="crc_8c_html_a0e5fbe587f4f4f83b262a280c3271822"><div class="ttname"><a href="crc_8c.html#a0e5fbe587f4f4f83b262a280c3271822">CRCIsValid</a></div><div class="ttdeci">bool CRCIsValid(const void *Block)</div><div class="ttdoc">This function validates whether the calculated CRC of the SBF block at hand matches the CRC field tha...</div><div class="ttdef"><b>Definition:</b> <a href="crc_8c_source.html#l00063">crc.c:63</a></div></div>
<div class="ttc" id="struct_block_header__t_html_a822dac6159cb707be904fef859af3e7c"><div class="ttname"><a href="struct_block_header__t.html#a822dac6159cb707be904fef859af3e7c">BlockHeader_t::Length</a></div><div class="ttdeci">uint16_t Length</div><div class="ttdoc">length of the entire message including the header. A multiple of 4 between 8 and 4096 ...</div><div class="ttdef"><b>Definition:</b> <a href="sbf__structs_8hpp_source.html#l00092">sbf_structs.hpp:92</a></div></div>
<div class="ttc" id="class_septentrio_html_a78449aa8f0bb64227eabc68e754ea715"><div class="ttname"><a href="class_septentrio.html#a78449aa8f0bb64227eabc68e754ea715">Septentrio::readingNMEAASCII</a></div><div class="ttdeci">bool readingNMEAASCII</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00462">minros.hpp:462</a></div></div>
<div class="ttc" id="class_septentrio_html_a6e3530157d234a5fda580e3218d8d3c3"><div class="ttname"><a href="class_septentrio.html#a6e3530157d234a5fda580e3218d8d3c3">Septentrio::ParseBinary</a></div><div class="ttdeci">void ParseBinary(uint8_t *block, unsigned short ID)</div><div class="ttdoc">Parses one septentrio block. </div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00713">minros.cpp:713</a></div></div>
<div class="ttc" id="class_septentrio_html_a39388cb16e4cf0371fdc78760a135fa2"><div class="ttname"><a href="class_septentrio.html#a39388cb16e4cf0371fdc78760a135fa2">Septentrio::~Septentrio</a></div><div class="ttdeci">~Septentrio()</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00304">minros.cpp:304</a></div></div>
<div class="ttc" id="struct_block_header__t_html_ae47cfac225de0794d56e9d0e8b55318b"><div class="ttname"><a href="struct_block_header__t.html#ae47cfac225de0794d56e9d0e8b55318b">BlockHeader_t::ID</a></div><div class="ttdeci">uint16_t ID</div><div class="ttdoc">The ID is the &quot;Block ID&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="sbf__structs_8hpp_source.html#l00091">sbf_structs.hpp:91</a></div></div>
<div class="ttc" id="class_septentrio_html_a8007c09f83f18bd1b66dd60a22367cf9"><div class="ttname"><a href="class_septentrio.html#a8007c09f83f18bd1b66dd60a22367cf9">Septentrio::pos_cov_cartesian_callback</a></div><div class="ttdeci">PosCovCartesianCallback pos_cov_cartesian_callback</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00483">minros.hpp:483</a></div></div>
<div class="ttc" id="class_callback_handlers_html_afe39d98c70e7f1a7bb2aa23ae4242970"><div class="ttname"><a href="class_callback_handlers.html#afe39d98c70e7f1a7bb2aa23ae4242970">CallbackHandlers::readCallback</a></div><div class="ttdeci">void readCallback(uint8_t *data, std::size_t &amp;size)</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00246">minros.hpp:246</a></div></div>
<div class="ttc" id="minros_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="minros_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00831">minros.cpp:831</a></div></div>
<div class="ttc" id="struct_pos_cov_cartesian_html"><div class="ttname"><a href="struct_pos_cov_cartesian.html">PosCovCartesian</a></div><div class="ttdoc">Struct for the SBF block &quot;PosCovCartesian&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="sbf__structs_8hpp_source.html#l00178">sbf_structs.hpp:178</a></div></div>
<div class="ttc" id="mosaic_message_8hpp_html_a40085c817fd45fa92733fe56c856dbee"><div class="ttname"><a href="mosaic_message_8hpp.html#a40085c817fd45fa92733fe56c856dbee">read</a></div><div class="ttdeci">bool read(typename boost::call_traits&lt; T &gt;::reference message, bool search=false)</div><div class="ttdoc">Performs CRC check (if SBF block) and populates message with the necessary content (mapped 1-to-1 if ...</div></div>
<div class="ttc" id="classminros__driver_1_1_gpgga_parser_html_ac7c69d4247abb7cfc766e90afc19a426"><div class="ttname"><a href="classminros__driver_1_1_gpgga_parser.html#ac7c69d4247abb7cfc766e90afc19a426">minros_driver::GpggaParser::ParseASCII</a></div><div class="ttdeci">nmea_msgs::GpggaPtr ParseASCII(const NMEASentence &amp;sentence) noexcept(false) override</div><div class="ttdoc">Parses one GGA message. </div><div class="ttdef"><b>Definition:</b> <a href="gpgga_8cpp_source.html#l00049">gpgga.cpp:49</a></div></div>
<div class="ttc" id="minros_8hpp_html"><div class="ttname"><a href="minros_8hpp.html">minros.hpp</a></div></div>
<div class="ttc" id="mosaic_message_8hpp_html_a8bb07e43349565d9fa5b7515c99d1043"><div class="ttname"><a href="mosaic_message_8hpp.html#a8bb07e43349565d9fa5b7515c99d1043">SEP_SYNC_BYTE_1</a></div><div class="ttdeci">#define SEP_SYNC_BYTE_1</div><div class="ttdef"><b>Definition:</b> <a href="mosaic_message_8hpp_source.html#l00031">mosaicMessage.hpp:31</a></div></div>
<div class="ttc" id="class_septentrio_html_a27e34669e35c70997c840171480d0a14"><div class="ttname"><a href="class_septentrio.html#a27e34669e35c70997c840171480d0a14">Septentrio::pvt_cartesian_callback</a></div><div class="ttdeci">PvtCartesianCallback pvt_cartesian_callback</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00482">minros.hpp:482</a></div></div>
<div class="ttc" id="class_septentrio_html_a62181db6b6f012c95883d21903d837e1"><div class="ttname"><a href="class_septentrio.html#a62181db6b6f012c95883d21903d837e1">Septentrio::latest_header</a></div><div class="ttdeci">BlockHeader_t latest_header</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00470">minros.hpp:470</a></div></div>
<div class="ttc" id="class_septentrio_html_a08f539ae7d7015320cb098bb6726daf0"><div class="ttname"><a href="class_septentrio.html#a08f539ae7d7015320cb098bb6726daf0">Septentrio::Septentrio</a></div><div class="ttdeci">Septentrio()</div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00226">minros.cpp:226</a></div></div>
<div class="ttc" id="class_callback_handler___html_a472e461d93e795039db2f52ea147dd13"><div class="ttname"><a href="class_callback_handler__.html#a472e461d93e795039db2f52ea147dd13">CallbackHandler_::Callback</a></div><div class="ttdeci">boost::function&lt; void(const T &amp;)&gt; Callback</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00163">minros.hpp:163</a></div></div>
<div class="ttc" id="namespaceio__comm__mosaic_html_aa30a9a9c115edfcf7aacdd3c4c372686"><div class="ttname"><a href="namespaceio__comm__mosaic.html#aa30a9a9c115edfcf7aacdd3c4c372686">io_comm_mosaic::Baudrates</a></div><div class="ttdeci">static const uint32_t Baudrates[]</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00299">minros.hpp:299</a></div></div>
<div class="ttc" id="classminros__driver_1_1_gpgga_parser_html"><div class="ttname"><a href="classminros__driver_1_1_gpgga_parser.html">minros_driver::GpggaParser</a></div><div class="ttdoc">Derived class for parsing GGA messages. </div><div class="ttdef"><b>Definition:</b> <a href="gpgga_8hpp_source.html#l00057">gpgga.hpp:57</a></div></div>
<div class="ttc" id="class_septentrio_html_a32726c90c33c912627a1d85e72aeaa45"><div class="ttname"><a href="class_septentrio.html#a32726c90c33c912627a1d85e72aeaa45">Septentrio::time_handler</a></div><div class="ttdeci">GetTimeHandler time_handler</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00480">minros.hpp:480</a></div></div>
<div class="ttc" id="class_async_manager_html"><div class="ttname"><a href="class_async_manager.html">AsyncManager</a></div><div class="ttdoc">This is the central interface between this ROS driver and the mosaic receiver(s), managing I/O operat...</div><div class="ttdef"><b>Definition:</b> <a href="async__manager_8hpp_source.html#l00076">async_manager.hpp:76</a></div></div>
<div class="ttc" id="mosaic_message_8hpp_html_a777fef7dfb89a56f0a5e114ce595ae7f"><div class="ttname"><a href="mosaic_message_8hpp.html#a777fef7dfb89a56f0a5e114ce595ae7f">SEP_SYNC_BYTE_2</a></div><div class="ttdeci">#define SEP_SYNC_BYTE_2</div><div class="ttdef"><b>Definition:</b> <a href="mosaic_message_8hpp_source.html#l00032">mosaicMessage.hpp:32</a></div></div>
<div class="ttc" id="class_septentrio_html_a532d0aa2bb84aa32c5f1645fe606af56"><div class="ttname"><a href="class_septentrio.html#a532d0aa2bb84aa32c5f1645fe606af56">Septentrio::bufferIncomingData</a></div><div class="ttdeci">void bufferIncomingData(uint8_t *msg, size_t length)</div><div class="ttdoc">data read from serial port is passed to this method </div><div class="ttdef"><b>Definition:</b> <a href="minros_8cpp_source.html#l00492">minros.cpp:492</a></div></div>
<div class="ttc" id="class_septentrio_html"><div class="ttname"><a href="class_septentrio.html">Septentrio</a></div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00374">minros.hpp:374</a></div></div>
<div class="ttc" id="structminros__driver_1_1_n_m_e_a_sentence_html"><div class="ttname"><a href="structminros__driver_1_1_n_m_e_a_sentence.html">minros_driver::NMEASentence</a></div><div class="ttdoc">Struct to split an NMEA sentence into its ID (e.g. the standardized &quot;$GPGGA&quot; or proprietary &quot;$PSSN...</div><div class="ttdef"><b>Definition:</b> <a href="nmea__sentence_8hpp_source.html#l00050">nmea_sentence.hpp:50</a></div></div>
<div class="ttc" id="class_septentrio_html_aa9395bbb7c8147de631d2bf125c6d503"><div class="ttname"><a href="class_septentrio.html#aa9395bbb7c8147de631d2bf125c6d503">Septentrio::bufIndex</a></div><div class="ttdeci">unsigned int bufIndex</div><div class="ttdoc">index to dataBuf </div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00461">minros.hpp:461</a></div></div>
<div class="ttc" id="class_septentrio_html_adc1abd04aa57f1ac911f63d70aa74a91"><div class="ttname"><a href="class_septentrio.html#adc1abd04aa57f1ac911f63d70aa74a91">Septentrio::dataBuf</a></div><div class="ttdeci">uint8_t dataBuf[4096]</div><div class="ttdoc">Holds incoming data; Buffer for incoming data. (FYI: An 8-bit signed char is guaranteed to be able to...</div><div class="ttdef"><b>Definition:</b> <a href="minros_8hpp_source.html#l00459">minros.hpp:459</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 22 2020 21:46:54 for MinROS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
